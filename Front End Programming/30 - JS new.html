<!DOCTYPE html> 
<html lang="en"> 

<head> 
    <title>JS new</title> 
</head> 

<body> 
    <script> /* "new" and Object */
        console.log("------------------>>> \"new\" and Object");

        function Character(name, age, hobby) {
            this.name = name;
            this.age = age;
            this.hobby = hobby;
            this.display = function() {
                console.log("My name is " + this.name + ". I am " + age + " years old and I like " + hobby + ".");
            };
        }

        let person1 = new Character("Ali", 12, "Reading");
        let person2 = new Character("Siti", 15, "Biking");

        person1.display(); // Output: My name is Ali. I am 12 years old and I like Reading.
        person2.display(); // Output: My name is Siti. I am 15 years old and I like Biking.

        let person3 = Character("Ahmad", 20, "Sleeping");
     // person3.display(); // Error
        // When you call "Character" without new, the function runs as a normal function, not as a constructor.  
        // Inside "Character", "this" will refers to the global object (window in browsers), not to a new object.
        // The properties "name", "age", "hobby" and "display" are set on the global object, not on "person3".
        // The function does not return anything, so "person3" is undefined.
        // To avoid not use "new", keyword "target" can be applied.
    </script>

    <script> /* "target" */
        console.log("------------------>>> \"target\"");

        // "new.target" will tells whether a function or constructor was called using the new keyword.
        // If no, it will return "undefined".

        function Character2(name, age, hobby) {
            console.log("new.target = " + new.target);

            if(new.target) { 
                this.name = name;
                this.age = age;
                this.hobby = hobby;
                this.display = function() {
                    console.log("My name is " + this.name + ". I am " + age + " years old and I like " + hobby + ".");
                };
            }
            
            else
                return new Character2("undefined", "undefined", "undefined");
        }

        let person4 = Character2("Steve", 17, "Writing"); // Output: new.target = undefined
        person4.display(); // Output: new.target = function Character2(name, age, hobby) { ... }
                           //         My name is undefined. I am undefined years old and I like undefined.
        // It execute the else statement.

        let person5 = new Character2("Tom", 18, "Fishing"); // No Output
        person5.display(); // Output: new.target = function Character2(name, age, hobby) { ... }
                           //         My name is Tom. I am 18 years old and I like Fishing.
        // It execute the if statement.
    </script>
</body> 

</html>