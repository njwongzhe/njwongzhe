<!DOCTYPE html> 
<html lang="en"> 

<head> 
    <title>JS Change Target of this</title> 
</head> 

<body> 
    <script> /* "apply()" & "call()" */
        console.log("------------------>>> \"apply()\" & \"call()\"");
        function run(x, y) {
            console.log(this.name, this.age, x, y);
        }

        let obj = {
            name: "Rick",
            age: 12
        };

        // Both "call()" and "apply()" are used to invoke a function with a specified "this" context and arguments.
        // "call()" accepts arguments individually. // Syntax: call(objectPointTo, "arg1", "arg2", ...)
        // "apply()" accepts arguments as an array. // Syntax: apply(objectPointTo, [arrayOfArg])
        
        run("window", "window");            // "this" in "run()" point to "window". // Output: undefined window window
        run.call(obj, "call", "call");      // "this" in "run()" point to "obj".    // Output: Rick 12 call call
        run.apply(obj, ["apply", "apply"]); // "this" in "run()" point to "obj".    // Output: Rick 12 apply apply

        let obj2 = {
            name: "Tom",
            age: 13,
            run: function (x, y) {
                console.log(this.name, this.age, x, y);
            }
        }

        obj2.run("obj2", "obj2");                 // "this" of "run()" in "obj2" point to "obj2". // Output: Tom 13 obj2 obj2
        obj2.run.call(obj, "call", "call");       // "this" of "run()" in "obj2" point to "obj".  // Output: Rick 12 call call
        obj2.run.apply(obj2, ["apply", "apply"]); // "this" of "run()" in "obj2" point to "obj".  // Output: Rick 12 apply apply
        
        function argumentsToArray(x, y) {
         // let newArray = arguments.slice(); // Error since "arguments" not a real array which can use "slice()".
            let newArray = [].slice.call(arguments); 
            // We put the arguments inside "call()" to let the "this" inside "slice()" point to object "arguments" since "arguments" not a real array that can use "slice()".
            
            console.log(newArray);
        }

        argumentsToArray(1, 2); // Output: (2)Â [1, 2]
    </script>

    <script> /* "bind()" */
        console.log("------------------>>> \"bind()\"");

        // bind() can returns a new function with a specified "this" value and optionally.
        // "call()" will invokes a function immediately.
        // "bind()" allow bound function can be invoked later.
        // Syntax: bind(objectPointTo, "arg1", "arg2", ...)

        let runObj = run.bind(obj, "bind", "bind"); // Nothing Output
        runObj(); // Output: Rick 12 bind bind
        runObj(); // Output: Rick 12 bind bind
        runObj(); // Output: Rick 12 bind bind

        runObj = run.call(obj, "call", "call"); // Output: Rick 12 call call
        // "call()" will invokes a function immediately.

     // runObj(); // Error since "runObj" not contain a function now.
    </script>
</body> 

</html>